{% extends "base.html" %}
{% block title %}{{ _("Welcome to T-Lux") }}{% endblock %}

{% block content %}
<div class="container text-center">
  <h2 class="mt-4">🌍 {{ _("Welcome to T-Lux Unlock System") }}</h2>
  <p>{{ _("Choose your language and country to get started:") }}</p>

  <!-- Formulário de idioma e país -->
  <form action="{{ url_for('set_language', lang=request.args.get('lang', get_locale())) }}" method="get" class="mb-4">
    <div class="row justify-content-center">
      <div class="col-md-4">
        <label class="form-label">{{ _("Language") }}</label>
        <select name="lang" class="form-select" onchange="this.form.submit()">
          {% for code, name in languages.items() %}
            <option value="{{ code }}" {% if get_locale() == code %}selected{% endif %}>{{ name }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-4">
        <label class="form-label">{{ _("Country") }}</label>
        <select name="country" class="form-select">
          {% for code, data in countries.items() %}
            <option value="{{ code }}">{{ data.name }}</option>
          {% endfor %}
        </select>
      </div>
    </div>
  </form>

  <hr class="my-4">

  <!-- Lista de modelos -->
  <h3>📱 {{ _("Available iPhone Models") }}</h3>
  <div class="row justify-content-center mt-3">
    {% for model, price in modelos.items() %}
      <div class="col-md-4 mb-3">
        <div class="card card-tlux text-center p-3">
          <strong>{{ model }}</strong><br>
          💰 {{ price }} MZN
          {% if session.get('user_id') %}
            <form action="{{ url_for('unlock_page') }}" method="POST" class="mt-2">
              <input type="hidden" name="modelo" value="{{ model }}">
              <button class="btn btn-tlux">{{ _("Unlock Now") }} 🔓</button>
            </form>
          {% else %}
            <p class="text-muted small mt-2">{{ _("Login required to unlock") }}</p>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
