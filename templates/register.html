{% extends "base.html" %}
{% block title %}{{ _("Create Account â€” T-Lux Unlock Systems") }}{% endblock %}

{% block content %}
<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <div class="card shadow-lg border-0 p-4 rounded-4">

        <!-- Header -->
        <h3 class="mb-4 text-center gold-text fw-bold">
          âš¡ {{ _("Create Your T-Lux Account") }}
        </h3>

        <!-- Flash messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <!-- Registration Form -->
        <form method="POST" action="{{ url_for('register') }}" autocomplete="off" novalidate>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="first_name" class="form-label fw-semibold">{{ _("First Name") }}</label>
              <input id="first_name" name="first_name" class="form-control rounded-3"
                     placeholder="{{ _('Enter your first name') }}" required>
            </div>
            <div class="col-md-6 mb-3">
              <label for="last_name" class="form-label fw-semibold">{{ _("Last Name") }}</label>
              <input id="last_name" name="last_name" class="form-control rounded-3"
                     placeholder="{{ _('Enter your last name') }}" required>
            </div>
          </div>

          <div class="mb-3">
            <label for="username" class="form-label fw-semibold">{{ _("Username") }}</label>
            <input id="username" name="username" class="form-control rounded-3"
                   placeholder="{{ _('Choose a unique username') }}" required>
          </div>

          <div class="mb-3">
            <label for="email" class="form-label fw-semibold">{{ _("Email Address") }}</label>
            <input id="email" name="email" type="email" class="form-control rounded-3"
                   placeholder="{{ _('you@example.com') }}" required>
          </div>

          <div class="mb-3">
            <label for="password" class="form-label fw-semibold">{{ _("Password") }}</label>
            <input id="password" name="password" type="password" class="form-control rounded-3"
                   placeholder="{{ _('Create a strong password') }}" required>
          </div>

          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="language" class="form-label fw-semibold">{{ _("Language") }}</label>
              <select id="language" name="language" class="form-select rounded-3">
                {% for code, name in languages.items() %}
                  <option value="{{ code }}">{{ name }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-6 mb-3">
              <label for="region" class="form-label fw-semibold">{{ _("Country / Region") }}</label>
              <select id="region" name="region" class="form-select rounded-3" required>
                <option value="" selected disabled>{{ _("Select your country") }}</option>
                {% for code, info in countries.items() %}
                  <option value="{{ code }}">{{ info.name }} ({{ info.currency }})</option>
                {% endfor %}
              </select>
            </div>
          </div>

          <!-- Terms and Conditions -->
          <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" id="terms" name="terms" required>
            <label class="form-check-label" for="terms">
              {{ _("I accept the") }}
              <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal" class="text-decoration-none fw-semibold">
                {{ _("Terms and Conditions") }}
              </a>
            </label>
          </div>

          <button class="btn btn-tlux w-100 fw-bold py-2" type="submit">
            ðŸš€ {{ _("Register") }}
          </button>
        </form>

        <!-- Extra Links -->
        <div class="mt-3 text-center small">
          {{ _("Already have an account?") }}
          <a href="{{ url_for('login') }}" class="text-primary fw-semibold">{{ _("Login") }}</a><br>
          {{ _("Didnâ€™t receive the verification email?") }}
          <a href="{{ url_for('resend_verification_code_route') }}" class="text-decoration-none fw-semibold">
            {{ _("Resend verification") }}
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Terms & Conditions Modal -->
<div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content border-0 rounded-4 shadow-lg">
      <div class="modal-header bg-dark text-light">
        <h5 class="modal-title gold-text" id="termsModalLabel">
          {{ _("Terms and Conditions â€” T-Lux Unlock Systems") }}
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body text-dark small" style="white-space: pre-line;">
        <h6>{{ _("1. Service Usage") }}</h6>
        {{ _("By creating an account on T-Lux, you agree to use our platform responsibly and in compliance with all applicable laws. The services provided are for authorized device unlocking only.") }}

        <h6 class="mt-3">{{ _("2. Data Privacy") }}</h6>
        {{ _("Your personal data is securely stored and used only for account management, payment processing, and service delivery. We never sell or share your data without consent.") }}

        <h6 class="mt-3">{{ _("3. Payments and Refunds") }}</h6>
        {{ _("All payments are processed via Stripe or official partners. Refunds are accepted only if the unlock service was not successfully completed.") }}

        <h6 class="mt-3">{{ _("4. Account Responsibility") }}</h6>
        {{ _("You are responsible for keeping your credentials secure. T-Lux is not liable for unauthorized access resulting from negligence.") }}

        <h6 class="mt-3">{{ _("5. Service Availability") }}</h6>
        {{ _("While we strive for 24/7 availability, maintenance or provider downtime may temporarily affect service access.") }}

        <h6 class="mt-3">{{ _("6. Changes to Terms") }}</h6>
        {{ _("T-Lux reserves the right to update these terms at any time. Continued use of the platform means acceptance of the new terms.") }}

        <h6 class="mt-3">{{ _("7. Contact and Support") }}</h6>
        {{ _("For support, contact: support@t-lux.store or visit our official Telegram channel.") }}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-tlux w-25" data-bs-dismiss="modal">{{ _("Close") }}</button>
      </div>
    </div>
  </div>
</div>

<!-- Style -->
<style>
  .gold-text { color: #d4af37; }
  .btn-tlux { background-color: #d4af37; border: none; color: #fff; }
  .btn-tlux:hover { background-color: #0d6efd; color: #fff; }
</style>
{% endblock %}
